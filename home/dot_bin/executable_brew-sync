#!/bin/bash
# brew-sync: ÁèæÂú®„ÅÆ Brewfile „Çí chezmoi „Å´ÂêåÊúü

set -e

echo "üîÑ Syncing Brewfile to chezmoi..."

# Brewfile „ÇíÂÜçÁîüÊàê
chezmoi apply --force ~/.Brewfile

# chezmoi „Å´ÂèçÊò†
chezmoi re-add

cd ~/.local/share/chezmoi

echo ""
echo "üìä Changes:"
git diff --stat home/dot_Brewfile.tmpl home/Brewfile.common home/Brewfile.work home/Brewfile.personal 2>/dev/null || echo "No changes"

echo ""
echo "üìù Review changes:"
echo "  cd ~/.local/share/chezmoi"
echo "  git diff"
echo ""
echo "Commit and push:"
echo "  git add home/Brewfile.* home/dot_Brewfile.tmpl"
echo "  git commit -m 'chore: sync Brewfile'"
echo "  git push"
